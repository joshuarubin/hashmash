/*! hashcash 2013-06-06 */
!function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0](function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a){!function(){"use strict";window.HashCash=a("./hashcash.coffee")}.call(this)},{"./hashcash.coffee":2}],2:[function(a,b){!function(){"use strict";var c,d,e,f,g,h,i,j,k;h=a("./sha1.coffee"),i=a("./taskmaster.coffee"),g=a("./properties.coffee"),d=i.NodeTaskMaster,f=i.WebTaskMaster,e=i.TimeoutTaskMaster,j=function(a){return"string"==typeof a?6!==a.length?null:a:"number"!=typeof a?null:j(""+a)},k=function(a,b){return b.start=b.end+1,b.start===a.length?!1:(b.end=a.indexOf(":",b.start),-1===b.end?!1:b.end===b.start?!1:!0)},c=function(){function a(b,c,g,h,i){var j,k,l,m;this._bits=b,this._bits<a.MIN_BITS&&(this._bits=a.MIN_BITS),this._workers=[],this._range={},this._resetRange(),k="undefined"==typeof window||null===window?d:"undefined"!=typeof Worker&&null!==Worker&&null!=h?f:e,i=null!=i?Math.min(i,k.MAX_NUM_WORKERS):k.DEFAULT_NUM_WORKERS,i&&(console.log("using "+i+" workers"),m=function(a){return this.stop(),null!=g?c.call(g,a):c(a)},this._workers=function(){var a,b;for(b=[],j=a=1;i>=1?i>=a:a>=i;j=i>=1?++a:--a)l=new k(this,m,this._range,h),b.push(l);return b}.call(this))}return a.VERSION=1,a.MIN_BITS=16,a.hash=h,a.date=function(){var a,b,c,d;return c=new Date,d=("0"+(c.getYear()-100)).slice(-2),b=("0"+(c.getMonth()+1)).slice(-2),a=("0"+c.getDate()).slice(-2),""+d+b+a},a.parse=function(a){var b,c,d;return null==a?null:(c={},d={start:0,end:-1,length:function(){return this.end-this.start}},k(a,d)?(c.version=parseInt(a.substr(d.start,d.length()),10),isNaN(c.version)?null:k(a,d)?(c.bits=parseInt(a.substr(d.start,d.length()),10),isNaN(c.bits)?null:k(a,d)?(c.date=parseInt(a.substr(d.start,d.length()),10),isNaN(c.date)?null:k(a,d)?(c.resource=a.substr(d.start,d.length()),c.resource.length?k(a,d)?(c.rand=a.substr(d.start,d.length()),c.rand.length?(k(a,d),b=(-1===d.end?a.length:d.end)-d.start,c.counter=parseInt(a.substr(d.start,b),10),isNaN(c.counter)?null:c):null):null:null):null):null):null):null)},a.unparse=function(a){var b,c;return c="",null==a.version?c:(c+=""+a.version+":",null==a.bits?c:(c+=""+a.bits+":",null==a.date?c:(b=j(a.date),null==b?c:(c+=""+b+":",null==a.resource?c:(c+=""+a.resource+":",null==a.rand?c:(c+=a.rand,null==a.counter?c:c+=":"+a.counter))))))},a.prototype._resetRange=function(){return this._range={begin:0,end:-1}},a.prototype._sendData=function(a){var b,c,d,e,f;for(e=this._workers,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.sendData(a));return f},a.prototype.stop=function(){var a,b,c,d,e;for(d=this._workers,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.stop());return e},a.prototype.generate=function(b){var c,d;return this._resetRange(),d={version:a.VERSION,bits:this._bits,date:a.date(),resource:b,rand:Math.random().toString(36).substr(2)},c={challenge:a.unparse(d),counter:0,bits:d.bits},this._sendData(c)},a.prototype.validate=function(b){var c,d;return null==b?!1:null==this._bits?!1:(c=a.parse(b),null==c?!1:c.bits<this._bits?!1:c.bits<a.MIN_BITS?!1:c.version!==a.VERSION?!1:(d=a.date(),c.date<d-1||c.date>d+1?!1:h.leading0s(a.hash(b))>=c.bits))},a}(),b.exports=c}.call(this)},{"./sha1.coffee":3,"./taskmaster.coffee":4,"./properties.coffee":5}],3:[function(a,b){!function(){"use strict";var a,c,d,e,f,g,h,i,j,k={}.hasOwnProperty;a=function(a,b){return a<<b|a>>>32-b},g=function(a){var b,c,d,e;for(c="",b=e=7;e>=0;b=--e)d=15&a>>>4*b,c+=d.toString(16);return c},c=function(a,b,c,d){switch(a){case 0:return b&c^~b&d;case 1:return b^c^d;case 2:return b&c^b&d^c&d;case 3:return b^c^d}},i=function(b){var d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;for(j=[1518500249,1859775393,2400959708,3395469782],b+=String.fromCharCode(128),w=b.length/4+2,l=Math.ceil(w/16),k=[],u=z=0,F=l-1;F>=0?F>=z:z>=F;u=F>=0?++z:--z)for(k[u]=[],v=A=0;15>=A;v=++A)k[u][v]=b.charCodeAt(64*u+4*v+0)<<24|b.charCodeAt(64*u+4*v+1)<<16|b.charCodeAt(64*u+4*v+2)<<8|b.charCodeAt(64*u+4*v+3)<<0;for(n=4294967296,k[l-1][14]=8*(b.length-1)/n,k[l-1][14]=Math.floor(k[l-1][14]),k[l-1][15]=4294967295&8*(b.length-1),d=1732584193,e=4023233417,f=2562383102,h=271733878,i=3285377520,o=[],u=B=0,G=l-1;G>=0?G>=B:B>=G;u=G>=0?++B:--B){for(y=C=0;15>=C;y=++C)o[y]=k[u][y];for(y=D=16;79>=D;y=++D)o[y]=a(o[y-3]^o[y-8]^o[y-14]^o[y-16],1);for(p=d,q=e,r=f,s=h,t=i,y=E=0;79>=E;y=++E)x=Math.floor(y/20),m=4294967295&a(p,5)+c(x,q,r,s)+t+j[x]+o[y],t=s,s=r,r=a(q,30),q=p,p=m;d=4294967295&d+p,e=4294967295&e+q,f=4294967295&f+r,h=4294967295&h+s,i=4294967295&i+t}return g(d)+g(e)+g(f)+g(h)+g(i)},h=function(a){var b,c,d,e,f;for(c=0,d=e=0,f=a.length-1;(f>=0?f>=e:e>=f)&&(b=parseInt(a[d],16),!isNaN(b));d=f>=0?++e:--e)switch(b){case 0:c+=4;break;case 1:return c+3;case 2:case 3:return c+2;case 4:case 5:case 6:case 7:return c+1;default:return c}return c},j=function(a){var b,c;return b=""+a.challenge+":"+a.counter,c=i(b),h(c)>=a.bits?(a.result=b,!0):(a.counter+=1,!1)},f=function(a){return i(a)},f.leading0s=function(a){return h(a)},f.tryChallenge=function(a){return j(a)},d={writable:!1,enumerable:!1,configurable:!1};for(e in f)k.call(f,e)&&Object.defineProperty(f,e,d);b.exports=f}.call(this)},{}],5:[function(a,b,c){!function(){"use strict";var a,b,d={}.hasOwnProperty;b={writable:!1,enumerable:!0,configurable:!1},a={writable:!1,enumerable:!1,configurable:!1},c.makeReadOnly=function(a){var b;if(null!=Object.defineProperty)for(b in a)d.call(a,b)&&"string"==typeof b&&"_"===b[0]&&Object.defineProperty(a,b,{enumerable:!1});return null!=Object.freeze?Object.freeze(a):void 0}}.call(this)},{}],6:[function(a,b,c){c.spawn=function(){},c.exec=function(){}},{}],4:[function(a,b,c){!function(b){!function(){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q={}.hasOwnProperty,r=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};for(j=a("child_process"),l=a("./sha1.coffee"),k=a("./properties.coffee"),e=99,f=1,g=function(){function a(a,b,c){this._caller=a,this._cb=b,this._range=c}return a.RANGE_INCREMENT=Math.pow(2,15),a.prototype._send=function(a){return this._spawn(),null!=this.sendFn?this.sendFn(a):void 0},a.prototype._spawn=function(){return null==this.worker?this.connect():void 0},a.prototype._incRange=function(){return this._range.begin=this._range.end+1,this._range.end=this._range.begin+a.RANGE_INCREMENT-1},a.prototype._sendRange=function(){return this._incRange(),this._send({m:"range",range:this._range})},a.prototype._gotResult=function(a){return null!=a?this._cb.call(this._caller,a):void 0},a.prototype._gotMessage=function(a){if(null!=(null!=a?a.m:void 0))switch(a.m){case"request_range":return this._sendRange();case"result":return this._gotResult(a.result);case"console_log":return console.log("worker",a.data)}},a.prototype.sendData=function(a){return this._send({m:"data",data:a})},a.prototype.stop=function(){return null!=this.worker?(this.disconnect(),delete this.worker,delete this.sendFn):void 0},a}(),d=function(a){function c(a,b,d){c.__super__.constructor.call(this,a,b,d),k.makeReadOnly(this)}return r(c,a),c.MAX_NUM_WORKERS=8,c.DEFAULT_NUM_WORKERS=c.MAX_NUM_WORKERS,c.prototype.connect=function(){var a;return console.log("adding worker"),this.worker=j.fork(b+"/worker.js"),a=this,this.worker.on("message",function(b){return a._gotMessage(b)}),k.makeReadOnly(this.worker),this.sendFn=function(a){return this.worker.send(a)}},c.prototype.disconnect=function(){return this.worker.disconnect()},c}(g),i=function(a){function b(a,c,d,e){this.file=e,b.__super__.constructor.call(this,a,c,d),k.makeReadOnly(this)}return r(b,a),b.MAX_NUM_WORKERS=8,b.DEFAULT_NUM_WORKERS=4,b.prototype.connect=function(){var a;return this.worker=new Worker(this.file),a=this,this.worker.onmessage=function(b){return a._gotMessage(b.data)},k.makeReadOnly(this.worker),this.sendFn=function(a){return this.worker.postMessage(a)}},b.prototype.disconnect=function(){return this.worker.terminate()},b}(g),h=function(){function a(a,b){this._caller=a,this._cb=b,k.makeReadOnly(this)}return a.MAX_NUM_WORKERS=1,a.DEFAULT_NUM_WORKERS=1,a.prototype.sendData=function(a){return this._data=a,delete this._stopFlag,this.start()},a.prototype.start=function(){var a,b;for(b=new Date;!(null!=this._stopFlag||null!=this._data.result||new Date-b>=e);)l.tryChallenge(this._data);return null==this._stopFlag?null!=this._data.result?this._cb.call(this._caller,this._data.result):(a=this,setTimeout(function(){return a.start()},f)):void 0},a.prototype.stop=function(){return this._stopFlag=!0},a}(),p=[g,g.prototype,d,d.prototype,i,i.prototype,h,h.prototype],n=0,o=p.length;o>n;n++)m=p[n],k.makeReadOnly(m);c.NodeTaskMaster=d,c.WebTaskMaster=i,c.TimeoutTaskMaster=h}.call(this)}("/")},{child_process:6,"./sha1.coffee":3,"./properties.coffee":5}]},{},[1]);