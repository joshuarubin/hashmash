/*! hashcash 2013-06-04 */
!function(a){if("function"==typeof bootstrap)bootstrap("hashcash",a);else if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeHashcash=a}else"undefined"!=typeof window?window.hashcash=a():global.hashcash=a()}(function(){return function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){!function(){var b,d,e,f,g,h,i,j,k;j=a("./sha1"),k=a("./taskmaster"),d=k.NodeTaskMaster,f=k.WebTaskMaster,e=k.TimeoutTaskMaster,i=function(a){var b,c,d,e,f;for(c=0,d=e=0,f=a.length-1;(f>=0?f>=e:e>=f)&&(b=parseInt(a[d],16),!isNaN(b));d=f>=0?++e:--e)switch(b){case 0:c+=4;break;case 1:return c+3;case 2:case 3:return c+2;case 4:case 5:case 6:case 7:return c+1;default:return c}return c},g=function(a){return"string"==typeof a?6!==a.length?null:a:"number"!=typeof a?null:g(""+a)},h=function(a,b){return b.start=b.end+1,b.start===a.length?!1:(b.end=a.indexOf(":",b.start),-1===b.end?!1:b.end===b.start?!1:!0)},b=function(){function a(b,c,d,e,f){this._caller=b,this._bits=c,this._callback=d,this._workerFile=e,this._numWorkers=f,this._bits<a.MIN_BITS&&(this._bits=a.MIN_BITS),this._workers=[]}return a.VERSION=1,a.MIN_BITS=16,a.hash=j.hash,a.genDate=function(){var a,b,c,d;return c=new Date,d=("0"+(c.getYear()-100)).slice(-2),b=("0"+(c.getMonth()+1)).slice(-2),a=("0"+c.getDate()).slice(-2),""+d+b+a},a.buildString=function(a){var b,c;return c="",null==a.version?c:(c+=""+a.version+":",null==a.bits?c:(c+=""+a.bits+":",null==a.date?c:(b=g(a.date),null==b?c:(c+=""+b+":",null==a.resource?c:(c+=""+a.resource+":",null==a.rand?c:(c+=a.rand,null==a.counter?c:c+=":"+a.counter))))))},a.testSha=function(a){var b,c;return c=""+a.challenge+":"+a.counter,b=j.hash(c),i(b)>=a.bits?a.result=c:a.counter+=1,void 0},a.parse=function(a){var b,c,d;return null==a?null:(c={},d={start:0,end:-1,length:function(){return this.end-this.start}},h(a,d)?(c.version=parseInt(a.substr(d.start,d.length()),10),isNaN(c.version)?null:h(a,d)?(c.bits=parseInt(a.substr(d.start,d.length()),10),isNaN(c.bits)?null:h(a,d)?(c.date=parseInt(a.substr(d.start,d.length()),10),isNaN(c.date)?null:h(a,d)?(c.resource=a.substr(d.start,d.length()),c.resource.length?h(a,d)?(c.rand=a.substr(d.start,d.length()),c.rand.length?(h(a,d),b=(-1===d.end?a.length:d.end)-d.start,c.counter=parseInt(a.substr(d.start,b),10),isNaN(c.counter)?null:c):null):null:null):null):null):null):null)},a.prototype._resetRange=function(){return this.range={begin:0,end:-1}},a.prototype._workerCallback=function(a){return this.stop(),this._callback.call(this._caller,a)},a.prototype._workerGenerator=function(a){var b,c;if(!this._workers.length)return c=null!=this._numWorkers?Math.min(this._numWorkers,a.MAX_NUM_WORKERS):a.DEFAULT_NUM_WORKERS,console.log("using "+c+" workers"),this._workers=function(){var d,e;for(e=[],b=d=1;c>=1?c>=d:d>=c;b=c>=1?++d:--d)e.push(new a(this,this._workerCallback,this.range,this._workerFile));return e}.call(this)},a.prototype._sendData=function(a){var b,c,d,e,f;for(e=this._workers,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.sendData(a));return f},a.prototype.stop=function(){var a,b,c,d,e;for(d=this._workers,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.stop());return e},a.prototype.generate=function(b){var c,g,h;return this._resetRange(),g={version:a.VERSION,bits:this._bits,date:a.genDate(),resource:b,rand:Math.random().toString(36).substr(2)},c={challenge:a.buildString(g),counter:0,bits:g.bits},h="undefined"==typeof window||null===window?d:"undefined"!=typeof Worker&&null!==Worker&&null!=this._workerFile?f:e,this._workerGenerator(h),this._sendData(c)},a.prototype.validate=function(b){var c,d;return null==b?!1:null==this._bits?!1:(c=a.parse(b),null==c?!1:c.bits<this._bits?!1:c.bits<a.MIN_BITS?!1:c.version!==a.VERSION?!1:(d=a.genDate(),c.date<d-1||c.date>d+1?!1:i(j.hash(b))>=c.bits))},a}(),c.HashCash=b}.call(this)},{"./sha1":2,"./taskmaster":3}],2:[function(a,b,c){!function(){var a,b,d;a=function(a,b){return a<<b|a>>>32-b},d=function(a){var b,c,d,e;for(c="",b=e=7;e>=0;b=--e)d=15&a>>>4*b,c+=d.toString(16);return c},b=function(a,b,c,d){switch(a){case 0:return b&c^~b&d;case 1:return b^c^d;case 2:return b&c^b&d^c&d;case 3:return b^c^d}},c.hash=function(c){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;for(j=[1518500249,1859775393,2400959708,3395469782],c+=String.fromCharCode(128),w=c.length/4+2,l=Math.ceil(w/16),k=[],u=z=0,F=l-1;F>=0?F>=z:z>=F;u=F>=0?++z:--z)for(k[u]=[],v=A=0;15>=A;v=++A)k[u][v]=c.charCodeAt(64*u+4*v+0)<<24|c.charCodeAt(64*u+4*v+1)<<16|c.charCodeAt(64*u+4*v+2)<<8|c.charCodeAt(64*u+4*v+3)<<0;for(n=4294967296,k[l-1][14]=8*(c.length-1)/n,k[l-1][14]=Math.floor(k[l-1][14]),k[l-1][15]=4294967295&8*(c.length-1),e=1732584193,f=4023233417,g=2562383102,h=271733878,i=3285377520,o=[],u=B=0,G=l-1;G>=0?G>=B:B>=G;u=G>=0?++B:--B){for(y=C=0;15>=C;y=++C)o[y]=k[u][y];for(y=D=16;79>=D;y=++D)o[y]=a(o[y-3]^o[y-8]^o[y-14]^o[y-16],1);for(p=e,q=f,r=g,s=h,t=i,y=E=0;79>=E;y=++E)x=Math.floor(y/20),m=4294967295&a(p,5)+b(x,q,r,s)+t+j[x]+o[y],t=s,s=r,r=a(q,30),q=p,p=m;e=4294967295&e+p,f=4294967295&f+q,g=4294967295&g+r,h=4294967295&h+s,i=4294967295&i+t}return d(e)+d(f)+d(g)+d(h)+d(i)}}.call(this)},{}],4:[function(){},{}],5:[function(a,b,c){c.spawn=function(){},c.exec=function(){}},{}],3:[function(a,b,c){!function(b){!function(){var d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=a("os"),h=a("child_process"),i=a("./hashcash"),e=function(){function a(a,b,c){this._caller=a,this._callback=b,this._range=c}return a.RANGE_INCREMENT=Math.pow(2,15),a.prototype._send=function(a){return this._spawn(),null!=this.sendFn?this.sendFn(a):void 0},a.prototype._spawn=function(){return null==this.worker?this.connect():void 0},a.prototype.sendData=function(a){return this._send({m:"data",data:a})},a.prototype._nextRange=function(){return this._range.begin=this._range.end+1,this._range.end=this._range.begin+a.RANGE_INCREMENT-1,this._range},a.prototype._sendRange=function(){var a;return a=this._nextRange(),this._send({m:"range",range:a})},a.prototype._gotResult=function(a){return null!=a?this._callback.call(this._caller,a):void 0},a.prototype._gotMessage=function(a){if(null!=(null!=a?a.m:void 0))switch(a.m){case"request_range":return this._sendRange();case"result":return this._gotResult(a.result);case"console_log":return console.log("worker",a.data)}},a.prototype.stop=function(){return null!=this.worker?(this.disconnect(),delete this.worker,delete this.sendFn):void 0},a}(),d=function(a){function c(a,b,d){c.__super__.constructor.call(this,a,b,d)}return l(c,a),c.MAX_NUM_WORKERS=null!=j.cpus?j.cpus().length:4,c.DEFAULT_NUM_WORKERS=c.MAX_NUM_WORKERS,c.prototype.connect=function(){var a;return this.worker=h.fork(b+"/worker.js"),a=this,this.worker.on("message",function(b){return a._gotMessage.call(a,b)}),this.sendFn=function(a){return this.worker.send(a)}},c.prototype.disconnect=function(){return this.worker.disconnect()},c}(e),g=function(a){function b(a,c,d,e){this.file=e,b.__super__.constructor.call(this,a,c,d)}return l(b,a),b.MAX_NUM_WORKERS=8,b.DEFAULT_NUM_WORKERS=4,b.prototype.connect=function(){var a;return this.worker=new Worker(this.file),a=this,this.worker.onmessage=function(b){return a._gotMessage.call(a,b.data)},this.sendFn=function(a){return this.worker.postMessage(a)}},b.prototype.disconnect=function(){return this.worker.terminate()},b}(e),f=function(){function a(a,b){this._caller=a,this._callback=b}return a.MAX_RUNTIME=99,a.YIELD_TIME=1,a.MAX_NUM_WORKERS=1,a.DEFAULT_NUM_WORKERS=1,a.prototype.sendData=function(a){return this._data=a,delete this._stopFlag,this.start()},a.prototype.start=function(){var b,c;for(c=new Date;!(null!=this._stopFlag||null!=this._data.result||new Date-c>=a.MAX_RUNTIME);)i.HashCash.testSha(this._data);return null==this._stopFlag?null!=this._data.result?this._callback.call(this._caller,this._data.result):(b=this,setTimeout(function(){return b.start.call(b)},a.YIELD_TIME)):void 0},a.prototype.stop=function(){return this._stopFlag=!0},a}(),c.TaskMaster=e,c.NodeTaskMaster=d,c.WebTaskMaster=g,c.TimeoutTaskMaster=f}.call(this)}("/")},{os:4,child_process:5,"./hashcash":1}]},{},[1])(1)});