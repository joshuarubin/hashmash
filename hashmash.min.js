!function(t,n){"function"==typeof define&&define.amd?define(n):t.HashMash=n()}(this,function(){var t,n,e;return function(r){function i(t,n){return w.call(t,n)}function o(t,n){var e,r,i,o,u,s,a,c,f,l,h=n&&n.split("/"),p=y.map,d=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(n){for(h=h.slice(0,h.length-1),t=h.concat(t.split("/")),c=0;c<t.length;c+=1)if(l=t[c],"."===l)t.splice(c,1),c-=1;else if(".."===l){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||d)&&p){for(e=t.split("/"),c=e.length;c>0;c-=1){if(r=e.slice(0,c).join("/"),h)for(f=h.length;f>0;f-=1)if(i=p[h.slice(0,f).join("/")],i&&(i=i[r])){o=i,u=c;break}if(o)break;!s&&d&&d[r]&&(s=d[r],a=c)}!o&&s&&(o=s,u=a),o&&(e.splice(0,u,o),t=e.join("/"))}return t}function u(t,n){return function(){return p.apply(r,m.call(arguments,0).concat([t,n]))}}function s(t){return function(n){return o(n,t)}}function a(t){return function(n){_[t]=n}}function c(t){if(i(v,t)){var n=v[t];delete v[t],b[t]=!0,h.apply(r,n)}if(!i(_,t)&&!i(b,t))throw new Error("No "+t);return _[t]}function f(t){var n,e=t?t.indexOf("!"):-1;return e>-1&&(n=t.substring(0,e),t=t.substring(e+1,t.length)),[n,t]}function l(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,p,d,g,_={},v={},y={},b={},w=Object.prototype.hasOwnProperty,m=[].slice;d=function(t,n){var e,r=f(t),i=r[0];return t=r[1],i&&(i=o(i,n),e=c(i)),i?t=e&&e.normalize?e.normalize(t,s(n)):o(t,n):(t=o(t,n),r=f(t),i=r[0],t=r[1],i&&(e=c(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:e}},g={require:function(t){return u(t)},exports:function(t){var n=_[t];return"undefined"!=typeof n?n:_[t]={}},module:function(t){return{id:t,uri:"",exports:_[t],config:l(t)}}},h=function(t,n,e,o){var s,f,l,h,p,y,w=[];if(o=o||t,"function"==typeof e){for(n=!n.length&&e.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(h=d(n[p],o),f=h.f,"require"===f)w[p]=g.require(t);else if("exports"===f)w[p]=g.exports(t),y=!0;else if("module"===f)s=w[p]=g.module(t);else if(i(_,f)||i(v,f)||i(b,f))w[p]=c(f);else{if(!h.p)throw new Error(t+" missing "+f);h.p.load(h.n,u(o,!0),a(f),{}),w[p]=_[f]}l=e.apply(_[t],w),t&&(s&&s.exports!==r&&s.exports!==_[t]?_[t]=s.exports:l===r&&y||(_[t]=l))}else t&&(_[t]=e)},t=n=p=function(t,n,e,i,o){return"string"==typeof t?g[t]?g[t](n):c(d(t,n).f):(t.splice||(y=t,n.splice?(t=n,n=e,e=null):t=r),n=n||function(){},"function"==typeof e&&(e=i,i=o),i?h(r,t,n,e):setTimeout(function(){h(r,t,n,e)},4),p)},p.config=function(t){return y=t,y.deps&&p(y.deps,y.callback),p},e=function(t,n,e){n.splice||(e=n,n=[]),i(_,t)||i(v,t)||(v[t]=[t,n,e])},e.amd={jQuery:!0}}(),e("almond",function(){}),e("lib/poly/lib/_base",["require","exports","module"],function(t,n){var e;e={}.toString,n.isFunction=function(t){return"function"==typeof t},n.isString=function(t){return"[object String]"==e.call(t)},n.toString=function(t){return e.apply(t)},n.createCaster=function(t,n){return function(e){if(null==e)throw new TypeError(n+" method called on null or undefined");return t(e)}}}),e("lib/poly/function",["./lib/_base"],function(t){function n(n){var e=r[n];return t.isFunction(o[e])}var e,r,i=[].slice,o=Function.prototype;return r={"function-bind":"bind"},n("function-bind")||(e=function(t){var n=i.call(arguments,1),e=this,r=function(){},o=function(){return e.apply(this instanceof r?this:t||{},n.concat(i.call(arguments)))};return r.prototype=this.prototype||{},o.prototype=new r,o},o.bind=e),{}}),/**
 * @author Joshua Rubin <jrubin@zvelo.com>
 *
 * @license
 * zvelo HashMash Javascript Library
 *
 * Copyright (c) 2013, zvelo, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * * Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * * Neither the name of zvelo, Inc. nor the names of its contributors
 *   may be used to endorse or promote products derived from this software
 *   without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 * ====
 *
 * SHA-1 implementation in JavaScript
 * (c) Chris Veness 2002-2010
 * www.movable-type.co.uk
 *  - http://csrc.nist.gov/groups/ST/toolkit/secure_hashing.html
 *  - http://csrc.nist.gov/groups/ST/toolkit/examples.html
 *
 * ====
 *
 * almond
 * (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 *
 */
function(){return!0}(),e("copyright",function(){}),/** @license MIT License (c) copyright 2011-2013 original author or authors */
function(t,n){t("when/when",[],function(){function t(t,n,e,i){return r(t).then(n,e,i)}function e(t,n){this.then=t,this.inspect=n}function r(t){return u(function(n){n(t)})}function i(n){return t(n,c)}function o(){function t(t,o,u){n.resolve=n.resolver.resolve=function(n){return i?r(n):(i=!0,t(n),e)},n.reject=n.resolver.reject=function(t){return i?r(c(t)):(i=!0,o(t),e)},n.notify=n.resolver.notify=function(t){return u(t),t}}var n,e,i;return n={promise:q,resolve:q,reject:q,notify:q,resolver:{resolve:q,reject:q,notify:q}},n.promise=e=u(t),n}function u(t){function n(t,n,e){return u(function(r,i,o){p?p.push(function(u){u.then(t,n,e).then(r,i,o)}):T(function(){h.then(t,n,e).then(r,i,o)})})}function r(){return h?h.inspect():M()}function i(t){p&&(h=s(t),l(p,h),p=q)}function o(t){i(c(t))}function a(t){p&&l(p,f(t))}var h,p=[];try{t(i,o,a)}catch(d){o(d)}return new e(n,r)}function s(t){return t instanceof e?t:t===Object(t)&&"then"in t?u(function(n,e,r){T(function(){try{var i=t.then;"function"==typeof i?j(i,t,n,e,r):n(a(t))}catch(o){e(o)}})}):a(t)}function a(t){var n=new e(function(e){try{return"function"==typeof e?s(e(t)):n}catch(r){return c(r)}},function(){return m(t)});return n}function c(t){var n=new e(function(e,r){try{return"function"==typeof r?s(r(t)):n}catch(i){return c(i)}},function(){return k(t)});return n}function f(t){var n=new e(function(e,r,i){try{return"function"==typeof i?f(i(t)):n}catch(o){return f(o)}});return n}function l(t,n){T(function(){for(var e,r=0;e=t[r++];)e(n)})}function h(t){return t&&"function"==typeof t.then}function p(n,e,r,i,o){return t(n,function(n){function s(r,i,o){function u(t){p(t)}function s(t){h(t)}var a,c,f,l,h,p,d,g;if(d=n.length>>>0,a=Math.max(0,Math.min(e,d)),f=[],c=d-a+1,l=[],a)for(p=function(t){l.push(t),--c||(h=p=E,i(l))},h=function(t){f.push(t),--a||(h=p=E,r(f))},g=0;d>g;++g)g in n&&t(n[g],s,u,o);else r(f)}return u(s).then(r,i,o)})}function d(t,n,e,r){function i(t){return n?n(t[0]):t[0]}return p(t,1,i,e,r)}function g(t,n,e,r){return b(t,E).then(n,e,r)}function _(){return b(arguments,E)}function v(t){return b(t,m,k)}function y(t,n){return b(t,n)}function b(n,e,r){return t(n,function(n){function i(i,o,u){var s,a,c,f,l;if(c=a=n.length>>>0,s=[],!c)return i(s),void 0;for(f=function(n,a){t(n,e,r).then(function(t){s[a]=t,--c||i(s)},o,u)},l=0;a>l;l++)l in n?f(n[l],l):--c}return u(i)})}function w(n,e){var r=j(S,arguments,1);return t(n,function(n){var i;return i=n.length,r[0]=function(n,r,o){return t(n,function(n){return t(r,function(t){return e(n,t,o,i)})})},I.apply(n,r)})}function m(t){return{state:"fulfilled",value:t}}function k(t){return{state:"rejected",reason:t}}function M(){return{state:"pending"}}function T(t){1===O.push(t)&&N()}function N(){x(R)}function R(){for(var t,n=0;t=O[n++];)t();O=[]}function E(t){return t}t.defer=o,t.resolve=r,t.reject=i,t.join=_,t.all=g,t.map=y,t.reduce=w,t.settle=v,t.any=d,t.some=p,t.isPromise=h,t.promise=u,e.prototype={otherwise:function(t){return this.then(q,t)},ensure:function(t){function n(){return r(t())}return this.then(n,n).yield(this)},yield:function(t){return this.then(function(){return t})},spread:function(t){return this.then(function(n){return g(n,function(n){return t.apply(q,n)})})},always:function(t,n){return this.then(t,t,n)}};var I,S,j,x,O,F,A,D,C,q;return O=[],F=n.setTimeout,x="function"==typeof setImmediate?setImmediate.bind(n):"object"==typeof process&&process.nextTick?process.nextTick:"object"==typeof vertx?vertx.runOnLoop:function(t){F(t,0)},A=Function.prototype,D=A.call,j=A.bind?D.bind(D):function(t,n){return t.apply(n,S.call(arguments,2))},C=[],S=C.slice,I=C.reduce||function(t){var n,e,r,i,o;if(o=0,n=Object(this),i=n.length>>>0,e=arguments,e.length<=1)for(;;){if(o in n){r=n[o++];break}if(++o>=i)throw new TypeError}else r=e[1];for(;i>o;++o)o in n&&(r=t(r,n[o],o,n));return r},t})}("function"==typeof e&&e.amd?e:function(t){module.exports=t()},this),e("when",["when/when"],function(t){return t}),function(){e("lib/sha1",[],function(){var t,n,e,r,i,o,u;return t=function(t,n){return t<<n|t>>>32-n},r=function(t){var n,e,r,i;for(e="",n=i=7;i>=0;n=--i)r=15&t>>>4*n,e+=r.toString(16);return e},n=function(t,n,e,r){switch(t){case 0:return n&e^~n&r;case 1:return n^e^r;case 2:return n&e^n&r^e&r;case 3:return n^e^r}},o=function(e){var i,o,u,s,a,c,f,l,h,p,d,g,_,v,y,b,w,m,k,M,T,N,R,E,I,S,j,x,O;for(c=[1518500249,1859775393,2400959708,3395469782],e+=String.fromCharCode(128),k=e.length/4+2,l=Math.ceil(k/16),f=[],w=N=0,x=l-1;x>=0?x>=N:N>=x;w=x>=0?++N:--N)for(f[w]=[],m=R=0;15>=R;m=++R)f[w][m]=e.charCodeAt(64*w+4*m+0)<<24|e.charCodeAt(64*w+4*m+1)<<16|e.charCodeAt(64*w+4*m+2)<<8|e.charCodeAt(64*w+4*m+3)<<0;for(p=4294967296,f[l-1][14]=8*(e.length-1)/p,f[l-1][14]=Math.floor(f[l-1][14]),f[l-1][15]=4294967295&8*(e.length-1),i=1732584193,o=4023233417,u=2562383102,s=271733878,a=3285377520,d=[],w=E=0,O=l-1;O>=0?O>=E:E>=O;w=O>=0?++E:--E){for(T=I=0;15>=I;T=++I)d[T]=f[w][T];for(T=S=16;79>=S;T=++S)d[T]=t(d[T-3]^d[T-8]^d[T-14]^d[T-16],1);for(g=i,_=o,v=u,y=s,b=a,T=j=0;79>=j;T=++j)M=Math.floor(T/20),h=4294967295&t(g,5)+n(M,_,v,y)+b+c[M]+d[T],b=y,y=v,v=t(_,30),_=g,g=h;i=4294967295&i+g,o=4294967295&o+_,u=4294967295&u+v,s=4294967295&s+y,a=4294967295&a+b}return r(i)+r(o)+r(u)+r(s)+r(a)},i=function(t){var n,e,r,i,o;for(e=0,r=i=0,o=t.length-1;(o>=0?o>=i:i>=o)&&(n=parseInt(t[r],16),!isNaN(n));r=o>=0?++i:--i){switch(!1){case 0!==n:e+=4;break;case 1!==n:e+=3;break;case!(n>=2&&3>=n):e+=2;break;case!(n>=4&&7>=n):e+=1}if(0!==n)break}return e},u=function(t){var n,e;return n=""+t.challenge+":"+t.counter,e=o(n),i(e)>=t.bits?(t.result=n,!0):(t.counter+=1,!1)},e=function(t){return o(t)},e.leading0s=function(t){return i(t)},e.tryChallenge=function(t){return u(t)},e})}.call(this),function(){e("lib/hashmash",["when","./sha1"],function(t,n){var e,r,i;return r=function(t){return"string"==typeof t?6!==t.length?null:t:"number"!=typeof t?null:r(""+t)},i=function(t,n){return n.start=n.end+1,n.start===t.length?!1:(n.end=t.indexOf(":",n.start),-1===n.end?!1:n.end===n.start?!1:!0)},e=function(){function e(t,n,r){var i,o;this._bits=t,this._bits<e.MIN_BITS&&(this._bits=e.MIN_BITS),this._workers=[],this._range={},this._resetRange(),i=e.TaskMaster,null==n&&null!=e.BackupTaskMaster&&(i=e.BackupTaskMaster),r=null!=r?Math.min(r,i.MAX_NUM_WORKERS):i.DEFAULT_NUM_WORKERS,r&&(this._workers=function(){var t,e;for(e=[],o=t=1;r>=1?r>=t:t>=r;o=r>=1?++t:--t)e.push(new i(this._range,n));return e}.call(this))}return e.VERSION=1,e.MIN_BITS=16,e.hash=n,e.date=function(){var t,n,e,r;return e=new Date,r=("0"+(e.getYear()-100)).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),t=("0"+e.getDate()).slice(-2),""+r+n+t},e.parse=function(t){var n,e,r;return null==t?null:(e={},r={start:0,end:-1,length:function(){return this.end-this.start}},i(t,r)?(e.version=parseInt(t.substr(r.start,r.length()),10),isNaN(e.version)?null:i(t,r)?(e.bits=parseInt(t.substr(r.start,r.length()),10),isNaN(e.bits)?null:i(t,r)?(e.date=parseInt(t.substr(r.start,r.length()),10),isNaN(e.date)?null:i(t,r)?(e.resource=t.substr(r.start,r.length()),e.resource.length?i(t,r)?(e.rand=t.substr(r.start,r.length()),e.rand.length?(i(t,r),n=(-1===r.end?t.length:r.end)-r.start,e.counter=parseInt(t.substr(r.start,n),10),isNaN(e.counter)?null:e):null):null:null):null):null):null):null)},e.unparse=function(t){var n,e;return e="",null==t.version?e:(e+=""+t.version+":",null==t.bits?e:(e+=""+t.bits+":",null==t.date?e:(n=r(t.date),null==n?e:(e+=""+n+":",null==t.resource?e:(e+=""+t.resource+":",null==t.rand?e:(e+=t.rand,null==t.counter?e:e+=":"+t.counter))))))},e.prototype._resetRange=function(){return this._range={begin:0,end:-1}},e.prototype._sendData=function(t,n){var e,r,i,o,u;for(o=this._workers,u=[],r=0,i=o.length;i>r;r++)e=o[r],u.push(e.sendData(t,n));return u},e.prototype.stop=function(){var t,n,e,r,i;for(r=this._workers,i=[],n=0,e=r.length;e>n;n++)t=r[n],i.push(t.stop());return i},e.prototype.generate=function(n){var r,i,o,u,s,a;this._resetRange(),a=t.defer(),s=a.resolver,u=a.promise,o={version:e.VERSION,bits:this._bits,date:e.date(),resource:n,rand:Math.random().toString(36).substr(2)},r={challenge:e.unparse(o),counter:0,bits:o.bits};try{this._sendData(s,r)}catch(c){i=c,s.reject(i)}return u.ensure(this.stop.bind(this)),u},e.prototype.validate=function(t){var r,i;if(null!=t&&"string"==typeof t&&null!=this._bits&&(r=e.parse(t),null!=r&&!(r.bits<this._bits||r.bits<e.MIN_BITS||r.version!==e.VERSION||(i=e.date(),r.date<i-1||r.date>i+1||!(n.leading0s(e.hash(t))>=r.bits)))))return r},e}()})}.call(this),function(){var t={}.hasOwnProperty,n=function(n,e){function r(){this.constructor=n}for(var i in e)t.call(e,i)&&(n[i]=e[i]);return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};e("lib/taskmaster",["./sha1"],function(t){var e,r,i,o,u,s;return e=99,r=1,s={},i=function(){function t(t){this._range=t,this._sendQueue=[],this._ready=!1}return t.RANGE_INCREMENT=Math.pow(2,15),t.prototype._send=function(t){return this._spawn(),null!=this.sendFn?this._ready?this.sendFn(t):this._sendQueue.push(t):void 0},t.prototype._setGo=function(){var t;for(this._ready=!0,t=[];this._sendQueue.length;)t.push(this._send(this._sendQueue.shift()));return t},t.prototype._spawn=function(){return null==this.worker?this.connect():void 0},t.prototype._incRange=function(){return this._range.begin=this._range.end+1,this._range.end=this._range.begin+t.RANGE_INCREMENT-1},t.prototype._sendRange=function(){return this._incRange(),this._send({m:"range",range:this._range})},t.prototype._gotResult=function(t){if(null==t)throw new Error("TaskMaster expected a result");if(null==this._resolver)throw new Error("TaskMaster requires a resolver");return this._resolver.resolve(t)},t.prototype._gotMessage=function(t){if(null!=(null!=t?t.m:void 0))switch(t.m){case"ready":return this._setGo();case"request_range":return this._sendRange();case"result":return this._gotResult(t.result)}},t.prototype.sendData=function(t,n){if(this._resolver=t,null==this._resolver)throw new Error("TaskMaster requires a resolver");return this._send({m:"data",data:n})},t.prototype.stop=function(){return this._ready=!1,this._sendQueue.length=0,null!=this.worker?(this.disconnect(),delete this.worker,delete this.sendFn):void 0},t}(),s.TaskMaster=i,u=function(t){function e(t,n){this.file=n,e.__super__.constructor.call(this,t)}return n(e,t),e.MAX_NUM_WORKERS=8,e.DEFAULT_NUM_WORKERS=4,e.prototype.connect=function(){var t;return this.worker=new Worker(this.file),t=this,this.worker.onmessage=function(n){return t._gotMessage(n.data)},this.worker.onerror=function(t){throw t.data},this.sendFn=function(t){return this.worker.postMessage(t)}},e.prototype.disconnect=function(){return this.worker.terminate()},e}(i),s.WebTaskMaster=u,o=function(){function n(){}return n.MAX_NUM_WORKERS=1,n.DEFAULT_NUM_WORKERS=1,n.prototype.sendData=function(t,n){if(this._resolver=t,this._data=n,null==this._resolver)throw new Error("TaskMaster requires a resolver");return delete this._stopFlag,this.start()},n.prototype.start=function(){var n,i;for(i=new Date;!(null!=this._stopFlag||null!=this._data.result||new Date-i>=e);)t.tryChallenge(this._data);if(null==this._stopFlag){if(null!=this._data.result){if(null==this._resolver)throw new Error("TaskMaster requires a resolver");return this._resolver.resolve(this._data.result)}return n=this,setTimeout(function(){return n.start()},r)}},n.prototype.stop=function(){return this._stopFlag=!0},n}(),s.TimeoutTaskMaster=o,s})}.call(this),function(){e("hashmash",["./lib/hashmash","./lib/taskmaster"],function(t,n){var e=n.WebTaskMaster,r=n.TimeoutTaskMaster;return window.Worker?(t.TaskMaster=e,t.BackupTaskMaster=r):t.TaskMaster=r,t})}(),n("hashmash")});
//@ sourceMappingURL=hashmash.min.js.map